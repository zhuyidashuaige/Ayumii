<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">â¤ Ruang belajar eksklusif Ayumiiisaa â¤</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- æ–°å¢ï¼šæµªæ¼«æ‰‹å†™æ ‡é¢˜å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&display=swap" rel="stylesheet">
</head>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // ä»…é¦–æ¬¡æ‰“å¼€æ˜¾ç¤ºï¼ˆæŒ‰æµè§ˆå™¨æŒä¹…åŒ–è®°å½•ï¼‰ï¼Œå¦‚éœ€â€œæ¯æ¬¡åˆ·æ–°é¦–æ¬¡â€å¯æ”¹ä¸º sessionStorage
    if (!localStorage.getItem('lovePopupShown')) {
      showLovePopup();
    }
  });

  function showLovePopup() {
    // åˆ›å»ºè¦†ç›–å±‚ä¸å¼¹çª—
    const overlay = document.createElement('div');
    overlay.id = 'lovePopupOverlay';
    overlay.innerHTML = `
      <div class="love-popup">
        <img src="love.gif" alt="love" />
      </div>
    `;
    document.body.appendChild(overlay);

    // æ³¨å…¥æ ·å¼ï¼ˆåªæ³¨å…¥ä¸€æ¬¡ï¼‰
    if (!document.querySelector('style[data-love-popup]')) {
      const style = document.createElement('style');
      style.setAttribute('data-love-popup', 'true');
      style.textContent = `
        #lovePopupOverlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.45);
          backdrop-filter: blur(2px);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 9999;
          animation: popupFadeIn 0.25s ease;
        }
        .love-popup {
          background: #ffffff;
          border-radius: 12px;
          padding: 10px;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
          max-width: 90vw;
          max-height: 90vh;
          animation: popupScaleIn 0.25s ease;
        }
        .love-popup img {
          display: block;
          width: 320px;
          height: auto;
          max-width: 80vw;
          max-height: 80vh;
          border-radius: 8px;
        }
        @media (max-width: 480px) {
          .love-popup img { width: 240px; }
        }
        @keyframes popupFadeIn {
          from { opacity: 0; } to { opacity: 1; }
        }
        @keyframes popupScaleIn {
          from { transform: scale(0.95); opacity: 0.9; }
          to   { transform: scale(1); opacity: 1; }
        }
      `;
      document.head.appendChild(style);
    }

    // ç‚¹å‡»ä»»æ„ä½ç½®å…³é—­ï¼ˆåŒ…æ‹¬å›¾ç‰‡æœ¬èº«ï¼‰
    const close = () => {
      localStorage.setItem('lovePopupShown', '1');
      overlay.remove();
    };
    overlay.addEventListener('click', close, { once: true });
  }
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    showRomanticLovePopup(); // æ— æ¡ä»¶æ˜¾ç¤º
  });

  function showRomanticLovePopup() {
    const overlay = document.createElement('div');
    overlay.id = 'loveOverlay';
    overlay.innerHTML = `
      <div class="love-card" role="dialog" aria-modal="true" aria-label="Romantic Welcome">
        <div class="love-header">
          <span class="love-heart">â¤</span>
          <span class="love-title">For my dearest Ayumiiisaa</span>
          <span class="love-heart">â¤</span>
        </div>
        <div class="love-media">
          <img src="love.gif" alt="love">
        </div>
        <div class="love-text">Pelukan itu hal yang paling romantis, kan? Aku ingin memelukmu seumur hidup, seperti foto ini.</div>
        <div class="love-hint">Klik di mana saja untuk menutup âœ¨</div>
      </div>
    `;
    document.body.appendChild(overlay);

    // ç‚¹å‡»ä»»æ„å¤„ä¼˜é›…å…³é—­
    const close = () => {
      overlay.classList.add('love-exit');
      setTimeout(() => overlay.remove(), 200);
    };
    overlay.addEventListener('click', close, { once: true });
  }
</script>
<body>
    <!-- æ–°å¢ï¼šæ¼‚æµ®çˆ±å¿ƒèƒŒæ™¯ -->
    <div class="romance-hearts" aria-hidden="true">
        <span></span><span></span><span></span><span></span><span></span><span></span>
        <span></span><span></span><span></span><span></span><span></span><span></span>
    </div>
    <div class="container">
        <header class="header">
            <div class="back-button hidden" id="backButton" onclick="goBack()">
                <span>â† Kembali ke Daftar Isi</span>
            </div>
            <h1 class="title" id="mainTitle">â¤ Ruang belajar eksklusif Ayumiiisaa â¤</h1>
            <p class="subtitle" id="mainSubtitle">0,99Â³â¶âµ = 0,03 &nbsp;&nbsp;&nbsp;
1,01Â³â¶âµ = 37,8&nbsp;&nbsp;&nbsp;
Lakukan sedikit kemajuan setiap hari dan Anda akan menjadi pegawai negeri sipil.</p>

            <!-- æ–°å¢ï¼šç›®å½•æœç´¢ -->
            <div class="search-bar">
                <div class="search-input-wrap">
                    <input id="dirSearch" type="text" placeholder="Cari proyek atau direktori" autocomplete="off">
                    <button id="clearSearch" title="æ¸…ç©º">âœ•</button>
                </div>
                <div class="search-results hidden" id="searchResults"></div>
            </div>
        </header>
        
        <main class="main-content" id="mainContent">
            <!-- ä¸»é¡µç§‘ç›®é€‰æ‹© -->
            <div class="subject-grid" id="subjectGrid">
                <div class="subject-card" onclick="goToSubject('Teori Bilangan', 'æ•°è®º')">
                    <div class="subject-icon">ğŸ”¢</div>
                    <h3>Teori Bilangan</h3>
                    <p>æ•°è®º</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Operasi Bilangan Pecahan', 'åˆ†æ•°è¿ç®—')">
                    <div class="subject-icon">â—</div>
                    <h3>Operasi Bilangan Pecahan</h3>
                    <p>åˆ†æ•°è¿ç®—</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Persentase', 'ç™¾åˆ†æ¯”')">
                    <div class="subject-icon">ğŸ“Š</div>
                    <h3>Persentase</h3>
                    <p>ç™¾åˆ†æ¯”</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Perbandingan', 'æ¯”ä¸æ¯”ä¾‹')">
                    <div class="subject-icon">âš–ï¸</div>
                    <h3>Perbandingan</h3>
                    <p>æ¯”ä¸æ¯”ä¾‹</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Waktu, Jarak dan Kecepatan', 'æ—¶é—´ã€è·ç¦»ã€é€Ÿåº¦')">
                    <div class="subject-icon">ğŸš€</div>
                    <h3>Waktu, Jarak dan Kecepatan</h3>
                    <p>æ—¶é—´ã€è·ç¦»ã€é€Ÿåº¦</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Waktu, Jarak dan Kecepatan 2', 'æ—¶é—´ã€è·ç¦»ã€é€Ÿåº¦ 2')">
                    <div class="subject-icon">ğŸƒ</div>
                    <h3>Waktu, Jarak dan Kecepatan 2</h3>
                    <p>æ—¶é—´ã€è·ç¦»ã€é€Ÿåº¦ 2</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Aritmetika Sosial', 'ç¤¾ä¼šç®—æœ¯ï¼ˆæŠ˜æ‰£ã€åˆ©æ¶¦ç­‰ï¼‰')">
                    <div class="subject-icon">ğŸ’°</div>
                    <h3>Aritmetika Sosial</h3>
                    <p>ç¤¾ä¼šç®—æœ¯ï¼ˆæŠ˜æ‰£ã€åˆ©æ¶¦ç­‰ï¼‰</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Tabel dan Diagram', 'è¡¨æ ¼ä¸å›¾è¡¨')">
                    <div class="subject-icon">ğŸ“ˆ</div>
                    <h3>Tabel dan Diagram</h3>
                    <p>è¡¨æ ¼ä¸å›¾è¡¨</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Mean, Median, Modus dan Range', 'å¹³å‡æ•°ã€ä¸­ä½æ•°ã€ä¼—æ•°ã€æå·®')">
                    <div class="subject-icon">ğŸ“Š</div>
                    <h3>Mean, Median, Modus dan Range</h3>
                    <p>å¹³å‡æ•°ã€ä¸­ä½æ•°ã€ä¼—æ•°ã€æå·®</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Sinonim/Persamaan Kata', 'è¿‘ä¹‰è¯')">
                    <div class="subject-icon">ğŸ“</div>
                    <h3>Sinonim/Persamaan Kata</h3>
                    <p>è¿‘ä¹‰è¯</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Sinonim 2', 'è¿‘ä¹‰è¯ 2')">
                    <div class="subject-icon">âœï¸</div>
                    <h3>Sinonim 2</h3>
                    <p>è¿‘ä¹‰è¯ 2</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Kumpulan Sinonim Kata', 'è¿‘ä¹‰è¯æ±‡æ€»')">
                    <div class="subject-icon">ğŸ“š</div>
                    <h3>Kumpulan Sinonim Kata</h3>
                    <p>è¿‘ä¹‰è¯æ±‡æ€»</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Antonim/Lawan Kata', 'åä¹‰è¯')">
                    <div class="subject-icon">ğŸ”„</div>
                    <h3>Antonim/Lawan Kata</h3>
                    <p>åä¹‰è¯</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Antonim 2', 'åä¹‰è¯ 2')">
                    <div class="subject-icon">ğŸ”ƒ</div>
                    <h3>Antonim 2</h3>
                    <p>åä¹‰è¯ 2</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Kumpulan Antonim Kata', 'åä¹‰è¯æ±‡æ€»')">
                    <div class="subject-icon">ğŸ“–</div>
                    <h3>Kumpulan Antonim Kata</h3>
                    <p>åä¹‰è¯æ±‡æ€»</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Analogi/Relasi Makna', 'è¯­ä¹‰ç±»æ¯”')">
                    <div class="subject-icon">ğŸ§©</div>
                    <h3>Analogi/Relasi Makna</h3>
                    <p>è¯­ä¹‰ç±»æ¯”</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Analogi Kata 2', 'è¯­ä¹‰ç±»æ¯” 2')">
                    <div class="subject-icon">ğŸ¯</div>
                    <h3>Analogi Kata 2</h3>
                    <p>è¯­ä¹‰ç±»æ¯” 2</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Pengelompokan Kata', 'è¯è¯­å½’ç±»')">
                    <div class="subject-icon">ğŸ—‚ï¸</div>
                    <h3>Pengelompokan Kata</h3>
                    <p>è¯è¯­å½’ç±»</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Pemahaman Bacaan', 'é˜…è¯»ç†è§£')">
                    <div class="subject-icon">ğŸ“–</div>
                    <h3>Pemahaman Bacaan</h3>
                    <p>é˜…è¯»ç†è§£</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Aljabar, Pangkat dan Akar', 'ä»£æ•°ã€å¹‚ä¸æ ¹')">
                    <div class="subject-icon">ğŸ”¢</div>
                    <h3>Aljabar, Pangkat dan Akar</h3>
                    <p>ä»£æ•°ã€å¹‚ä¸æ ¹</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Persamaan Linear Satu Variabel dan Aplikasinya', 'ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹åŠå…¶åº”ç”¨')">
                    <div class="subject-icon">ğŸ“</div>
                    <h3>Persamaan Linear Satu Variabel dan Aplikasinya</h3>
                    <p>ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹åŠå…¶åº”ç”¨</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Persamaan Linier Dua Variabel dan Aplikasinya', 'äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹åŠå…¶åº”ç”¨')">
                    <div class="subject-icon">ğŸ“</div>
                    <h3>Persamaan Linier Dua Variabel dan Aplikasinya</h3>
                    <p>äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹åŠå…¶åº”ç”¨</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Persamaan Linear Tiga Variabel dan Aplikasinya', 'ä¸‰å…ƒä¸€æ¬¡æ–¹ç¨‹åŠå…¶åº”ç”¨')">
                    <div class="subject-icon">ğŸ“Š</div>
                    <h3>Persamaan Linear Tiga Variabel dan Aplikasinya</h3>
                    <p>ä¸‰å…ƒä¸€æ¬¡æ–¹ç¨‹åŠå…¶åº”ç”¨</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Persamaan Kuadrat', 'äºŒæ¬¡æ–¹ç¨‹')">
                    <div class="subject-icon">ğŸ”º</div>
                    <h3>Persamaan Kuadrat</h3>
                    <p>äºŒæ¬¡æ–¹ç¨‹</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Aritmetika dan Geometri', 'ç®—æœ¯ä¸å‡ ä½•')">
                    <div class="subject-icon">ğŸ“</div>
                    <h3>Aritmetika dan Geometri</h3>
                    <p>ç®—æœ¯ä¸å‡ ä½•</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Bangun Datar', 'å¹³é¢å‡ ä½•')">
                    <div class="subject-icon">ğŸ”·</div>
                    <h3>Bangun Datar</h3>
                    <p>å¹³é¢å‡ ä½•</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Bangun Ruang', 'ç«‹ä½“å‡ ä½•')">
                    <div class="subject-icon">ğŸ§Š</div>
                    <h3>Bangun Ruang</h3>
                    <p>ç«‹ä½“å‡ ä½•</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Eksponen Lanjutan dan Persamaannya', 'æŒ‡æ•°è¿›é˜¶åŠå…¶æ–¹ç¨‹')">
                    <div class="subject-icon">âš¡</div>
                    <h3>Eksponen Lanjutan dan Persamaannya</h3>
                    <p>æŒ‡æ•°è¿›é˜¶åŠå…¶æ–¹ç¨‹</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Himpunan', 'é›†åˆ')">
                    <div class="subject-icon">ğŸ¯</div>
                    <h3>Himpunan</h3>
                    <p>é›†åˆ</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Teori Peluang, Permutasi dan Kombinasi', 'æ¦‚ç‡ã€æ’åˆ—ä¸ç»„åˆ')">
                    <div class="subject-icon">ğŸ²</div>
                    <h3>Teori Peluang, Permutasi dan Kombinasi</h3>
                    <p>æ¦‚ç‡ã€æ’åˆ—ä¸ç»„åˆ</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Deret Angka dan Huruf', 'æ•°å­—ä¸å­—æ¯æ•°åˆ—')">
                    <div class="subject-icon">ğŸ”¢</div>
                    <h3>Deret Angka dan Huruf</h3>
                    <p>æ•°å­—ä¸å­—æ¯æ•°åˆ—</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Deret Gambar', 'å›¾å½¢æ•°åˆ—')">
                    <div class="subject-icon">ğŸ–¼ï¸</div>
                    <h3>Deret Gambar</h3>
                    <p>å›¾å½¢æ•°åˆ—</p>
                </div>
                <div class="subject-card" onclick="goToSubject('Sudut, Garis dan Kesebangunan', 'è§’ã€ç›´çº¿ä¸ç›¸ä¼¼ï¼ˆå½¢ï¼‰')">
                    <div class="subject-icon">ğŸ“</div>
                    <h3>Sudut, Garis dan Kesebangunan</h3>
                    <p>è§’ã€ç›´çº¿ä¸ç›¸ä¼¼ï¼ˆå½¢ï¼‰</p>
                </div>
                <div class="subject-card" onclick="goToSubject('exam', 'è€ƒè¯•')">
                    <div class="subject-icon">ğŸ“</div>
                    <h3>Exam</h3>
                    <p>è€ƒè¯•</p>
                </div>
                <div class="subject-card" onclick="showRelaxMenu()">
                    <div class="subject-icon">âŒ¨</div>
                    <h3>Relax</h3>
                    <p>æ”¾æ¾ä¸€ä¸‹</p>
                </div>
            </div>
            
            <!-- å­ç›®å½•é€‰æ‹© -->
            <div class="menu-section hidden" id="subMenu">
                <div class="sub-menu-grid">
                    <div class="sub-menu-card" onclick="showContent('åŸºç¡€çŸ¥è¯†')">
                        <div class="sub-icon">ğŸ“š</div>
                        <h3>Dasar-dasar</h3>
                    </div>
                    <div class="sub-menu-card" onclick="showContent('è¯¾å ‚ä½œä¸š')">
                        <div class="sub-icon">âœï¸</div>
                        <h3>Pekerjaan Kelas</h3>
                    </div>
                    <div class="sub-menu-card" onclick="showContent('è¯¾åä½œä¸š')">
                        <div class="sub-icon">ğŸ“</div>
                        <h3>Pekerjaan rumah</h3>
                    </div>
                </div>
            </div>

            <!-- Relax ä¸“ç”¨å­èœå• -->
            <div class="menu-section hidden" id="relaxMenu">
                <div class="sub-menu-grid">
                    <div class="sub-menu-card" onclick="openExternalLink('https://zhuyidashuaige.github.io/Ayumii/interesting%20page/helicopter.html')">
                        <div class="sub-icon">ğŸš</div>
                        <h3>Helicopter</h3>
                    </div>
                    <div class="sub-menu-card" onclick="openExternalLink('https://zhuyidashuaige.github.io/Ayumii/interesting%20page/fire%20dragon.html')">
                        <div class="sub-icon">ğŸ‰</div>
                        <h3>Fire Dragon</h3>
                    </div>
                    <div class="sub-menu-card" onclick="openExternalLink('https://zhuyidashuaige.github.io/Ayumii/interesting%20page/sea_and_sky.html')">
                        <div class="sub-icon">ğŸ–ï¸</div>
                        <h3>sea and sky</h3>
                    </div>
                    <div class="sub-menu-card" onclick="openExternalLink('https://zhuyidashuaige.github.io/Ayumii/interesting%20page/love_mooncake.html')">
                        <div class="sub-icon">ğŸ¥®</div>
                        <h3>love mooncake</h3>
                    </div>
                    <div class="sub-menu-card" onclick="openExternalLink('https://zhuyidashuaige.github.io/Ayumii/interesting%20page/fish.html')">
                        <div class="sub-icon">ğŸŸ</div>
                        <h3>go fishing~</h3>
                    </div>
                </div>
            </div>
            
            <!-- å†…å®¹å±•ç¤ºåŒº -->
            <div class="content-section hidden" id="contentSection">
                <div class="back-button" onclick="showSubMenu()">
                    <span>â† kembali</span>
                </div>
                <h2 class="content-title" id="contentTitle"></h2>
                <div class="image-gallery" id="imageGallery">
                    <!-- å›¾ç‰‡å°†åœ¨è¿™é‡ŒåŠ¨æ€åŠ è½½ -->
                </div>
            </div>
        </main>
    </div>
    
    <script>
        let currentSubject = '';
        let currentChineseName = '';
        let currentCategory = '';
        
        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            const cards = document.querySelectorAll('.subject-card');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.05}s`;
                card.classList.add('fade-in-up');
            });
            
            // æ·»åŠ è§¦æ‘¸æ”¯æŒ
            if ('ontouchstart' in window) {
                document.body.classList.add('touch-device');
            }

            // æ–°å¢ï¼šæ„å»ºæœç´¢ç´¢å¼•ä¸ç»‘å®šäº‹ä»¶
            buildSearchIndex();
            bindSearchEvents();
        });

        // æ–°å¢ï¼šç›®å½•æœç´¢ç›¸å…³
        // å°†åŸå…ˆçš„ const CATEGORIES = ['åŸºç¡€çŸ¥è¯†','è¯¾å ‚ä½œä¸š','è¯¾åä½œä¸š']; æ›¿æ¢ä¸ºä¸­å°å¯¹ç…§è¡¨
        const CATEGORY_MAP = [
            { zh: 'åŸºç¡€çŸ¥è¯†',  id: 'Dasar-dasar' },
            { zh: 'è¯¾å ‚ä½œä¸š',  id: 'Pekerjaan Kelas' },
            { zh: 'è¯¾åä½œä¸š',  id: 'Pekerjaan rumah' }
        ];
        let searchIndex = [];
        let activeIdx = -1;
    
        function buildSearchIndex() {
            searchIndex = [];
            const cards = document.querySelectorAll('.subject-card');
            cards.forEach(card => {
                const subject = (card.querySelector('h3')?.textContent || '').trim();
                const chinese = (card.querySelector('p')?.textContent || '').trim();
                CATEGORY_MAP.forEach(cat => {
                    searchIndex.push({
                        subject,
                        chinese,
                        categoryZh: cat.zh,   // ç”¨äºçœŸå®è·³è½¬ï¼ˆä½ çš„ç›®å½•æ˜¯ä¸­æ–‡ï¼‰
                        categoryId: cat.id    // ç”¨äºä¸‹æ‹‰æ˜¾ç¤ºï¼ˆå°å°¼æ–‡ï¼‰
                    });
                });
            });
        }

        function normalize(str) {
            return (str || '')
                .toLowerCase()
                .normalize('NFKD')
                .replace(/[\u0300-\u036f]/g, '');
        }

        function matchItem(item, kw) {
            if (!kw) return true;
            const n = normalize(kw);
            return normalize(item.subject).includes(n) ||
                   normalize(item.chinese).includes(n) ||
                   normalize(item.categoryZh).includes(n) ||  // æ”¯æŒä¸­æ–‡ç›®å½•å…³é”®å­—
                   normalize(item.categoryId).includes(n);    // ä¹Ÿæ”¯æŒå°å°¼æ–‡ç›®å½•å…³é”®å­—
        }

        function renderResults(list, kw) {
            const box = document.getElementById('searchResults');
            if (!kw) {
                box.classList.add('hidden');
                box.innerHTML = '';
                return;
            }
            if (list.length === 0) {
                box.classList.remove('hidden');
                box.innerHTML = `<div class="search-empty">Tidak ada kecocokan yang ditemukan</div>`;
                return;
            }
            const html = list.slice(0, 12).map((it, i) => {
                return `
                    <div class="search-result-item" data-idx="${i}">
                        <span class="badge">ç›®å½•</span>
                        <div class="label">
                            <strong>${it.subject}</strong> â€” ${it.chinese} <span style="opacity:.7">â€º ${it.categoryId}</span>
                        </div>
                    </div>
                `;
            }).join('');
            box.innerHTML = html;
            box.classList.remove('hidden');

            // ç‚¹å‡»é€‰æ‹©
            Array.from(box.querySelectorAll('.search-result-item')).forEach((el, i) => {
                el.addEventListener('click', () => {
                    const item = list[i];
                    selectResult(item);
                });
            });
        }

        function filterSubjectCards(kw) {
            const cards = document.querySelectorAll('.subject-card');
            cards.forEach(card => {
                const subject = (card.querySelector('h3')?.textContent || '').trim();
                const chinese  = (card.querySelector('p')?.textContent || '').trim();
                const show = !kw || normalize(subject).includes(normalize(kw)) || normalize(chinese).includes(normalize(kw));
                card.style.display = show ? '' : 'none';
            });
        }

        function selectResult(item) {
            // è·³è½¬åˆ°ç§‘ç›®å¹¶ç›´æ¥æ‰“å¼€å¯¹åº”ç›®å½•
            goToSubject(item.subject, item.chinese);
            setTimeout(() => {
                showContent(item.categoryZh);
            }, 0);
            // æ¸…ç†UI
            const input = document.getElementById('dirSearch');
            input.blur();
            document.getElementById('searchResults').classList.add('hidden');
        }

        function bindSearchEvents() {
            const input = document.getElementById('dirSearch');
            const clearBtn = document.getElementById('clearSearch');
            const resultBox = document.getElementById('searchResults');

            let currentResults = [];

            function update() {
                const kw = input.value.trim();
                filterSubjectCards(kw);
                currentResults = searchIndex.filter(item => matchItem(item, kw));
                activeIdx = -1;
                renderResults(currentResults, kw);
            }

            input.addEventListener('input', update);
            clearBtn.addEventListener('click', () => {
                input.value = '';
                input.focus();
                update();
            });

            // é”®ç›˜æ“ä½œï¼šä¸Šä¸‹é€‰æ‹©ã€å›è½¦ç¡®è®¤ã€ESC å…³é—­
            input.addEventListener('keydown', (e) => {
                const items = Array.from(resultBox.querySelectorAll('.search-result-item'));
                if (e.key === 'ArrowDown') {
                    if (!items.length) return;
                    activeIdx = (activeIdx + 1) % items.length;
                    items.forEach(el => el.classList.remove('active'));
                    items[activeIdx].classList.add('active');
                    e.preventDefault();
                } else if (e.key === 'ArrowUp') {
                    if (!items.length) return;
                    activeIdx = (activeIdx - 1 + items.length) % items.length;
                    items.forEach(el => el.classList.remove('active'));
                    items[activeIdx].classList.add('active');
                    e.preventDefault();
                } else if (e.key === 'Enter') {
                    if (items.length && activeIdx >= 0) {
                        selectResult(currentResults[activeIdx]);
                    } else if (items.length) {
                        // æ²¡æœ‰é«˜äº®åˆ™é»˜è®¤é€‰æ‹©ç¬¬ä¸€é¡¹
                        selectResult(currentResults[0]);
                    }
                } else if (e.key === 'Escape') {
                    input.blur();
                    resultBox.classList.add('hidden');
                }
            });

            // ç‚¹å‡»å¤–éƒ¨åŒºåŸŸå…³é—­ç»“æœ
            document.addEventListener('click', (e) => {
                if (!resultBox.contains(e.target) && e.target !== input) {
                    resultBox.classList.add('hidden');
                }
            });
        }
        // è·³è½¬åˆ°ç§‘ç›®é¡µé¢ï¼ˆç°åœ¨æ”¹ä¸ºæ˜¾ç¤ºå­èœå•ï¼‰
        function goToSubject(subjectName, chineseName) {
            currentSubject = subjectName;
            currentChineseName = chineseName;
            
            // éšè—ä¸»é¡µé¢ï¼Œæ˜¾ç¤ºå­èœå•
            document.getElementById('subjectGrid').classList.add('hidden');
            document.getElementById('subMenu').classList.remove('hidden');
            document.getElementById('backButton').classList.remove('hidden');
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            document.getElementById('pageTitle').textContent = `${subjectName} - ç”œèœœå­¦ä¹ ä¹‹æ—…`;
            document.getElementById('mainTitle').textContent = `ğŸ“š ${subjectName}`;
            document.getElementById('mainSubtitle').textContent = chineseName;
            
            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            const subCards = document.querySelectorAll('.sub-menu-card');
            subCards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
                card.classList.add('fade-in-up');
            });
        }
        
        // è¿”å›ä¸»ç›®å½•
        function goBack() {
            document.getElementById('subjectGrid').classList.remove('hidden');
            document.getElementById('subMenu').classList.add('hidden');
            document.getElementById('relaxMenu').classList.add('hidden'); // æ–°å¢è¿™è¡Œ
            document.getElementById('contentSection').classList.add('hidden');
            document.getElementById('backButton').classList.add('hidden');
            
            // æ¢å¤åŸå§‹æ ‡é¢˜
            document.getElementById('pageTitle').textContent = 'â¤ Ruang belajar eksklusif Ayumiiisaa â¤';
            document.getElementById('mainTitle').textContent = 'â¤ Ruang belajar eksklusif Ayumiiisaa â¤';
            document.getElementById('mainSubtitle').textContent = '0,99Â³â¶âµ = 0,03     1,01Â³â¶âµ = 37,8     Lakukan sedikit kemajuan setiap hari dan Anda akan menjadi pegawai negeri sipil.';
        }
        
        // è¿”å›å­èœå•
        function showSubMenu() {
            document.getElementById('subMenu').classList.remove('hidden');
            document.getElementById('contentSection').classList.add('hidden');
        }
        
        // æ˜¾ç¤ºå†…å®¹
        function showContent(category) {
            currentCategory = category;
            document.getElementById('subMenu').classList.add('hidden');
            document.getElementById('contentSection').classList.remove('hidden');
            document.getElementById('contentTitle').textContent = `${currentSubject} - ${category}`;
            
            loadImages();
        }
        
        // åŠ è½½å›¾ç‰‡
        function loadImages() {
            const gallery = document.getElementById('imageGallery');
            gallery.innerHTML = '<div class="loading">Memuat gambar...</div>';
            
            // æ„å»ºå›¾ç‰‡è·¯å¾„
            const basePath = `èµ„æ–™/${currentSubject}/${currentCategory}`;
            
            // å¸¸è§çš„å›¾ç‰‡æ‰©å±•å
            const imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'webp'];
            const imagePromises = [];
            
            // å°è¯•åŠ è½½å¤šä¸ªå¯èƒ½çš„å›¾ç‰‡æ–‡ä»¶
            for (let i = 1; i <= 20; i++) {
                for (const ext of imageExtensions) {
                    const imagePath = `${basePath}/${i}.${ext}`;
                    imagePromises.push(checkImageExists(imagePath));
                    
                    // ä¹Ÿå°è¯•ä¸€äº›å¸¸è§çš„å‘½åæ¨¡å¼
                    const altPaths = [
                        `${basePath}/image${i}.${ext}`,
                        `${basePath}/img${i}.${ext}`,
                        `${basePath}/pic${i}.${ext}`,
                        `${basePath}/${String(i).padStart(2, '0')}.${ext}`
                    ];
                    
                    altPaths.forEach(path => {
                        imagePromises.push(checkImageExists(path));
                    });
                }
            }
            
            Promise.allSettled(imagePromises).then(results => {
                const validImages = results
                    .filter(result => result.status === 'fulfilled' && result.value)
                    .map(result => result.value)
                    .filter((path, index, self) => self.indexOf(path) === index); // å»é‡
                
                displayImages(validImages);
            });
        }
        
        // æ£€æŸ¥å›¾ç‰‡æ˜¯å¦å­˜åœ¨
        function checkImageExists(imagePath) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => resolve(imagePath);
                img.onerror = () => resolve(null);
                img.src = imagePath;
            });
        }
        
        // è·å–æ–‡ä»¶å¤§å°
        function getImageSize(imagePath) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    // å°è¯•è·å–æ–‡ä»¶å¤§å°ï¼ˆè¿™åœ¨æµè§ˆå™¨ä¸­æœ‰é™åˆ¶ï¼‰
                    resolve({
                        width: img.naturalWidth,
                        height: img.naturalHeight,
                        size: 'æœªçŸ¥å¤§å°' // æµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥è·å–æ–‡ä»¶å¤§å°
                    });
                };
                img.onerror = () => resolve({ width: 0, height: 0, size: 'æœªçŸ¥å¤§å°' });
                img.src = imagePath;
            });
        }
        
        // æ˜¾ç¤ºå›¾ç‰‡
        function displayImages(imagePaths) {
            const gallery = document.getElementById('imageGallery');
            
            if (imagePaths.length === 0) {
                gallery.innerHTML = `
                    <div class="error-message">
                        <h3>ğŸ˜” Belum ada gambar</h3>
                    </div>
                `;
                return;
            }
            
            gallery.innerHTML = '';
            
            imagePaths.forEach((imagePath, index) => {
                const imageItem = document.createElement('div');
                imageItem.className = 'image-item';
                imageItem.style.animationDelay = `${index * 0.1}s`;
                
                // è·å–æ–‡ä»¶å
                const fileName = imagePath.split('/').pop();
                
                imageItem.innerHTML = `
                    <div class="image-container">
                        <img src="${imagePath}" alt="${currentSubject} - ${currentCategory} - ${fileName}" loading="lazy">
                        <div class="image-overlay">
                            <button class="overlay-button" onclick="openImageModal('${imagePath}', '${fileName}')" title="æŸ¥çœ‹å¤§å›¾">
                                ğŸ‘ï¸
                            </button>
                            <button class="overlay-button" onclick="downloadImage('${imagePath}', '${fileName}')" title="ä¸‹è½½å›¾ç‰‡">
                                ğŸ“¥
                            </button>
                        </div>
                    </div>
                    <div class="image-info">
                        <div class="image-title">${fileName}</div>
                        <div class="image-size" id="size-${index}">åŠ è½½ä¸­...</div>
                    </div>
                `;
                
                gallery.appendChild(imageItem);
                
                // å¼‚æ­¥è·å–å›¾ç‰‡å°ºå¯¸ä¿¡æ¯
                getImageSize(imagePath).then(info => {
                    const sizeElement = document.getElementById(`size-${index}`);
                    if (sizeElement) {
                        sizeElement.textContent = `${info.width} Ã— ${info.height}px`;
                    }
                });
            });
        }
        
        // ä¸‹è½½å›¾ç‰‡
        function downloadImage(imagePath, fileName) {
            // åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„aæ ‡ç­¾æ¥è§¦å‘ä¸‹è½½
            const link = document.createElement('a');
            link.href = imagePath;
            link.download = fileName;
            link.style.display = 'none';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // æ˜¾ç¤ºä¸‹è½½æç¤º
            showToast(`æ­£åœ¨ä¸‹è½½: ${fileName}`, 'success');
        }
        
        // å›¾ç‰‡æ¨¡æ€æ¡†åŠŸèƒ½ï¼ˆå¢å¼ºç‰ˆï¼‰
        function openImageModal(imagePath, fileName) {
            const modal = document.createElement('div');
            modal.className = 'image-modal';
            
            // è·å–å›¾ç‰‡ä¿¡æ¯
            getImageSize(imagePath).then(info => {
                modal.innerHTML = `
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="modal-title">${fileName}</div>
                            <div class="modal-actions">
                                <button class="modal-button" onclick="downloadImage('${imagePath}', '${fileName}')">
                                    ğŸ“¥ ä¸‹è½½
                                </button>
                                <button class="close-modal" onclick="closeImageModal()">&times;</button>
                            </div>
                        </div>
                        <img src="${imagePath}" alt="${fileName}" class="modal-image">
                        <div class="modal-info">
                            <h3>${currentSubject} - ${currentCategory}</h3>
                            <p>æ–‡ä»¶å: ${fileName}</p>
                            <p>å°ºå¯¸: ${info.width} Ã— ${info.height} åƒç´ </p>
                            <p>å¤§å°: ${info.size}</p>
                        </div>
                    </div>
                `;
            });
            
            document.body.appendChild(modal);
            
            // ç‚¹å‡»èƒŒæ™¯å…³é—­æ¨¡æ€æ¡†
            modal.onclick = (e) => {
                if (e.target === modal) {
                    closeImageModal();
                }
            };
            
            // é˜»æ­¢æ¨¡æ€æ¡†å†…å®¹åŒºåŸŸçš„ç‚¹å‡»äº‹ä»¶å†’æ³¡
            modal.querySelector('.modal-content').onclick = (e) => {
                e.stopPropagation();
            };
        }
        
        // å…³é—­å›¾ç‰‡æ¨¡æ€æ¡†
        function closeImageModal() {
            const modal = document.querySelector('.image-modal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => {
                    modal.remove();
                }, 300);
            }
        }
        
        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            
            // æ·»åŠ toastæ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                .toast {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 12px 20px;
                    border-radius: 25px;
                    color: white;
                    font-weight: 600;
                    z-index: 2000;
                    animation: slideInRight 0.3s ease, fadeOut 0.3s ease 2.7s;
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                }
                
                .toast-success {
                    background: linear-gradient(145deg, #28a745, #20c997);
                }
                
                .toast-info {
                    background: linear-gradient(145deg, #17a2b8, #6f42c1);
                }
                
                .toast-error {
                    background: linear-gradient(145deg, #dc3545, #e83e8c);
                }
                
                @keyframes slideInRight {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                
                @keyframes fadeOut {
                    from {
                        opacity: 1;
                    }
                    to {
                        opacity: 0;
                    }
                }
            `;
            
            if (!document.querySelector('style[data-toast]')) {
                style.setAttribute('data-toast', 'true');
                document.head.appendChild(style);
            }
            
            document.body.appendChild(toast);
            
            // 3ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, 3000);
        }
        
        // é”®ç›˜äº‹ä»¶å¤„ç†
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeImageModal();
            }
        });
        
        // æ·»åŠ æ·¡å…¥åŠ¨ç”»æ ·å¼
        const fadeInStyle = document.createElement('style');
        fadeInStyle.textContent = `
            .fade-in-up {
                animation: fadeInUp 0.6s ease forwards;
                opacity: 0;
                transform: translateY(30px);
            }
            
            @keyframes fadeInUp {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            @keyframes fadeOut {
                from {
                    opacity: 1;
                    transform: scale(1);
                }
                to {
                    opacity: 0;
                    transform: scale(0.9);
                }
            }
            
            .touch-device .subject-card:hover {
                transform: none;
            }
            
            .touch-device .subject-card:active {
                transform: scale(0.95);
            }
            
            .hidden {
                display: none !important;
            }
        `;
        document.head.appendChild(fadeInStyle);

        // æ˜¾ç¤º Relax ä¸“ç”¨èœå•
        function showRelaxMenu() {
            // éšè—ä¸»é¡µé¢ï¼Œæ˜¾ç¤º Relax èœå•
            document.getElementById('subjectGrid').classList.add('hidden');
            document.getElementById('relaxMenu').classList.remove('hidden');
            document.getElementById('backButton').classList.remove('hidden');
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            document.getElementById('pageTitle').textContent = 'Relax - Waktu bersantai';
            document.getElementById('mainTitle').textContent = 'ğŸ® Relax';
            document.getElementById('mainSubtitle').textContent = 'Bersantailah dan pilih permainan favorit Anda';
            
            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            const relaxCards = document.querySelectorAll('#relaxMenu .sub-menu-card');
            relaxCards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
                card.classList.add('fade-in-up');
            });
        }

        // æ‰“å¼€å¤–éƒ¨é“¾æ¥
        function openExternalLink(url) {
            window.open(url, '_blank');
        }
    </script>
</body>
</html>





